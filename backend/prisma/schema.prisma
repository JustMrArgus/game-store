generator client {
  provider     = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int    @id @default(autoincrement())
  email     String @unique
  name      String
  password  String

  cart Cart?
}

model Cart {
  id     Int @id @default(autoincrement())
  userId Int @unique

  user  User @relation(fields: [userId], references: [id], onDelete: Cascade)
  items CartItem[]
}

model Game {
  id                Int      @id @default(autoincrement())
  keys               String[]
  quantity          Int
  title             String
  description       String
  trailer           String
  primaryImage      String
  additionalImages  String[]
  logo              String
  price             Decimal
  developer         String
  publisher         String
  releaseDate       String
  platforms         String[]
  minOS             String
  minCPU            String
  minMemory         String
  minGPU            String
  minStorage        String
  recOS             String
  recCPU            String
  recMemory         String
  recGPU            String
  recStorage        String

  cartItems CartItem[]
}

model CartItem {
  cartId Int
  gameId Int

  quantity Int      @default(1)
  price    Decimal

  cart Cart @relation(fields: [cartId], references: [id], onDelete: Cascade)
  game Game @relation(fields: [gameId], references: [id])

  @@id([cartId, gameId])
}
